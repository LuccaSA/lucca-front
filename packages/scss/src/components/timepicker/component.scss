@use '@lucca-front/scss/src/commons/utils/a11y';
@use '@lucca-front/icons/src/icon/exports' as icons;

@mixin component($atRoot: 'without: rule') {
  display: inline-flex;

	@at-root ($atRoot) {
    .timePicker-fieldset {
    	display: inline-flex;
    	align-items: center;
    	gap: var(--pr-t-spacings-50);
    	padding: var(--pr-t-spacings-50) var(--pr-t-spacings-100);
    	background-color: var(--components-timepicker-background);
    	color: var(--components-timepicker-color);
    	border-radius: var(--commons-borderRadius-M);
    	border: 0;
    	box-shadow: 0 0 0 1px var(--components-timepicker-border);
    	font-size: var(--components-timepicker-fontSize);
    	line-height: var(--components-timepicker-lineHeight);
    	z-index: 1;
    	margin: 0;
    	cursor: text;

      &:hover {
        --components-timepicker-border: var(--palettes-neutral-400);
      }

      &:focus-within {
        @include a11y.focusVisible($offset: 3px);
      }
    }

    .timePicker-fieldset-suffix {
    	display: flex;
    	justify-content: center;
    	pointer-events: none;
    }

    .timePicker-fieldset-group {
    	position: relative;
    	display: inline-flex;
    }

    .timePicker-fieldset-group-textfield {
    	display: block;
    	outline: none;
    }

    .timePicker-fieldset-group-textfield-input {
    	display: flex;
    	align-items: center;
    	justify-content: center;
    	border-radius: var(--commons-borderRadius-M);
    	border: 0;
    	text-align: center;
    	height: var(--components-timepicker-input-height);
    	width: var(--components-timepicker-input-width);
      opacity: 0;

      &:focus-visible + .timePicker-fieldset-group-textfield-display {
        background-color: var(--palettes-primary-100);
      }

    	// &.mod-L {
    	// 	width: 1.8rem;
    	// }
      //
    	// &.mod-XL {
    	// 	width: 2.5rem;
    	// }

    	&[type='number'] {
    		/* stylelint-disable-next-line property-no-vendor-prefix */
    		-moz-appearance: textfield;

    		/* stylelint-disable-next-line rule-empty-line-before */
    		&::-webkit-outer-spin-button,
    		&::-webkit-inner-spin-button {
    			/* stylelint-disable-next-line property-no-vendor-prefix */
    			-webkit-appearance: none;
    			margin: 0;
    		}
    	}
    }

    .timePicker-fieldset-group-textfield-display {
    	position: absolute;
    	top: 50%;
    	left: 50%;
    	transform: translate(-50%, -50%);
    	padding: var(--pr-t-spacings-50);
    	color: var(--components-timepicker-color);
      border-radius: var(--commons-borderRadius-M);
      cursor: text;
    }

    .timePicker-fieldset-group-button {
    	position: absolute;
    	bottom: calc(100% + var(--pr-t-spacings-100) + 1px);
    	left: 0;
    	right: 0;
    	width: 100%;
    	border: 0;
    	padding: 0;
    	height: 1rem;
    	background-color: transparent;
      color: var(--palettes-neutral-600);
    	cursor: pointer;

    	// style actionIcon
    	display: inline-flex;
    	justify-content: center;
    	align-items: center;
    	border-radius: var(--commons-borderRadius-M);

  		&:hover {
  			cursor: pointer;
  			background-color: var(--palettes-neutral-50);
  			color: var(--palettes-neutral-800);
  		}

  		&:focus-visible {
  			background-color: var(--palettes-neutral-100);
  			color: var(--palettes-neutral-800);
  			outline: none;
  		}

    	.lucca-icon {
    		@include icons.XS;
    	}

    	+ .timePicker-fieldset-group-button {
    		top: calc(100% + var(--pr-t-spacings-100) + 1px);
    		bottom: auto;
    	}
    }

    // .timePicker-skeletonOverlay {
    // 	inset: 0.75rem;
    // 	position: absolute;
    // 	border-radius: 0.8rem;
    // 	animation-name: aniUISkeleton;
    // 	animation-duration: 1s;
    // 	animation-timing-function: linear;
    // 	animation-iteration-count: infinite;
    // 	background: linear-gradient(90deg, var(--palettes-neutral-100), var(--palettes-neutral-50), var(--palettes-neutral-100));
    // 	background-size: 150%;
    // }
	}


  // TODO : Voir pourquoi Laurent avait supprimé ca dans la PR #2710.
  // Le design du picker jour était cassé.


  // &:not(.is-button) {
  //   .timePicker-fieldset-group-textfield-input {
  //     &[type='number'] {
  //       &:hover,
  //       &:focus,
  //       &:focus-visible {
  //         background-color: var(--palettes-100, var(--palettes-primary-100));
  //         outline: none;
  //       }
  //     }
  //   }
  // }

  // &.is-button {
  //   .timePicker-fieldset {
  //     background-color: var(--colors-white-color);
  //     cursor: pointer;
  //   }
  // }

  // &.palette-error {
  //   .timePicker-fieldset {
  //     &:focus-within,
  //     &:focus-visible {
  //       @include a11y.focusVisible($color: var(--palettes-error-700));
  //     }
  //   }
  // }
  //
  // &:not(.palette-error) {
  //   &.is-readonly {
  //     .timePicker-fieldset {
  //       --components-timepicker-border: var(--colors-white-color);
  //     }
  //   }
  // }
}
