@use 'exports' as *;

.calendarWrapper {
	@include wrapperVars;

	&.mod-daysOffHidden {
		@include daysOffHidden;
	}

	&.mod-daysOverflowingHidden {
		@include daysOverflowingHidden;
	}
}

.calendar {
	@include component;
	@include vars;

	// si les lignes ont trois colonnes
	&:has(.calendar-table-body-row-cell:nth-child(3):last-child) {
		@include third;
	}

	// si on a un début de sélection
	&:has(.calendar-table-body-row-cell.is-start) {
		// mais pas de fin de sélection
		&:not(:has(.calendar-table-body-row-cell.is-end)) {
			// et soit un focus-visible
			&:has(.calendar-table-body-row-cell-action:focus-visible) {
				// on appelle le mixin de sélection en cours
				@include selectionInProgress($event: ':focus-within');
			}

			// soit un survol (sans focus-visible)
			&:not(:has(.calendar-table-body-row-cell:focus-within)) {
				&:has(.calendar-table-body-row-cell:hover) {
					// on appelle le mixin de sélection en cours
					@include selectionInProgress($event: ':hover');
				}
			}
		}
	}
}

.calendar-table-body-row-cell,
.calendar-table-body-row-cell {
	&.is-daysOff {
		@include daysOff;
	}

	&.is-overflow {
		@include overflow;
	}

	&.is-current {
		@include current;
	}

	&.is-selected {
		@include selected;
	}

	&.is-start {
		@include start;
	}

	&.is-end {
		@include end;
	}
}
