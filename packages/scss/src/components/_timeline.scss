.timeline {
	list-style-type: none;
	padding: 0;
	margin: _theme("spacings.small") 0;
	display: flex;
	align-items: center;
}

.timeline-step {
	flex-grow: 1;
	display: flex;
	align-items: center;

	//Line
	&::after {
		content: '';
		display: block;
		flex-grow: 1;  
		height: 2px;
		margin: _theme('spacings.smaller');
		background-color: _color('primary', 200);
		border-radius: 2px;
	}

	&:last-child {
		flex-grow: 0;
	}

	&[aria-current="step"] {
		//Line
		&::after {
			background-color: _color('grey', 200);
		}

		.timeline-step-title {
			color: _color("primary", 700);
	
			&::after {
				background-color: _color('primary', 700);
				box-shadow: 0 0 0 _theme("spacings.smallest") _color('primary', 200);
			}
		}

		~ .timeline-step {
			//Line
			&::after {
				background-color: _color('grey', 200);
			}
			.timeline-step-title {
				color: _color("grey", 600);

				&::after {
					background-color: _color('grey', 200);
				}
			}
		}
	}
}

.timeline-step-title {
	padding-left: _theme("spacings.big");
	position: relative;
	display: block;
	color: _color('primary', 600);
	font-weight: 400;
	margin: 0;
	font-size: _theme("sizes.standard.font-size");
	line-height: _theme("sizes.standard.line-height");

	&::after {
		content: "";
		width: 1.0625rem;
		height: 1.0625rem;
		border-radius: 50%;
		background-color: _color('primary', 300);
		position: absolute;
		left: _theme("spacings.smallest");
		top: 50%;
		transform: translateY(-50%);
	}
}

.timeline-step-title-action {
	color: currentColor;
	text-decoration: none;

	&:hover, &:focus {
		color: currentColor;
		text-decoration: underline;
	}
}


// MOD
.timeline {
	&.mod-small {
		.timeline-step-title {
			padding-left: _theme("spacings.standard");

			&::after {
				width: .5625rem;
				height: .5625rem;
			}
		}
	}
	
	&.mod-big {
		.timeline-step-title {
			padding-left: calc(#{_theme("spacings.big") + _theme("spacings.smaller")});

			&::after {
				width: 1.5625rem;
				height: 1.5625rem;
			}
		}
	}

	&.mod-vertical {
		flex-direction: column;

		.timeline-step {
			margin-top: _theme("spacings.smaller");
			display: block;
			padding-left: _theme("spacings.big");
			position: relative;

			&:not(:last-child)::after {
				content: "";
				display: block;
				height: auto;
				width: 2px;
				position: absolute;
				top: _theme("spacings.big");
				bottom: -0.75rem;
				left: .66rem; // magic number
				margin: 0;
			}

			&:not(:last-child)[aria-current="step"] {
				&::after {
					top: calc(#{_theme("spacings.big") + _theme("spacings.smallest")});
				}
			}

			&:last-child::after {
				display: none;
			}
		}

		.timeline-step-title {
			margin: _theme("spacings.smaller") 0;
			margin-left: _theme("spacings.big") * -1;
		}
		
		&.mod-small {
			.timeline-step {
				padding-left: _theme("spacings.standard");
				&::after {
					bottom: _theme('spacings.small') * -1;
					left: .45rem; // magic number
				}
	
				&[aria-current="step"] {
					&::after {
						top: calc(#{_theme("spacings.big") + _theme("spacings.smallest")});
					}
				}
			}
			.timeline-step-title {
				margin-left: _theme("spacings.standard") * -1;
			}
		}
		
		&.mod-big {
			.timeline-step {
				padding-left: 2.5rem;

				&::after {
					bottom: _theme('spacings.smallest') * -1;
					left: .95rem; // magic number
					top: 2.5rem;
				}
	
				&[aria-current="step"] {
					&::after {
						top: _theme("spacings.bigger");
					}
				}
			}
			.timeline-step-title {
				margin-left: -2.5rem;
			}
		}
	}

	&.mod-number, 
	&.mod-smallNumber {
		counter-reset: timeline;

		&.mod-vertical {
			.timeline-step {
				margin: _theme("spacings.small") 0;

				.gauge {
					top: 1.625rem; // magic number
					bottom: -.625rem; // magic number
				}
			}
		}

		.timeline-step-title {
			counter-increment: timeline;

			&::before, &::after {
				opacity: 1;
				width: _theme("spacings.standard");
				height: _theme("spacings.standard");
				line-height: _theme("spacings.standard");
				left: _theme("spacings.smallest", true) * -1;
			}

			&::after {
				content: counter(timeline);
				color: _color("white");
				bottom: auto;
				background-color: transparent;
				text-align: center;
			}
		}
	}

	&.mod-smallNumber {
		.timeline-step-title {
			&::before, &::after {
				margin: 0 .125rem; // magic number
				width: 1.25rem; // magic number
				height: 1.25rem; // magic number
				line-height: 1.25rem; // magic number
				left: _theme("spacings.smallest", true) * -1;
			}

			&::after {
				width: 1.25rem; // magic number
				font-size: _theme("sizes.small.font-size");
			}
		}

		&.mod-vertical {
			.timeline-step-title {
				&::before, &::after {
					margin: .125rem; // magic number
				}
			}

			.timeline-step {
				.gauge {
					bottom: _theme("spacings.small", true) * -1;
				}
			}
		}

		.timeline-step-addBetween-action-icon {
			margin: 0 .125rem; // magic number

			&,
			.lucca-icon {
				height: 1.25rem; // magic number
				width: 1.25rem; // magic number
				line-height: 1.25rem; // magic number
				font-size: _theme("sizes.small.font-size");
				text-align: center;
			}
		}
	}
	
	&.mod-add {
		.timeline-step {
			&:nth-last-child(2) {
				.gauge {
					background-color: transparent;
				}
	
				.gauge-bar {
					border-bottom-style: dashed;
				}
			}
	
			&:last-child {
				.timeline-step-title {
					&::after {
						@include makeIcon("plus");
					}
				}
			}
		}
	
		&.mod-vertical {
			.timeline-step {
				&:nth-last-child(2) {
					.gauge-bar {
						border-left-style: dashed;
					}
				}
			}
		}
	}
}


.timeline-step-addLast {
	position: relative;

	&::after {
		content: "";
		position: absolute;
		right: 100%;
		top: 0;
		bottom: 0;
		width: _theme("spacings.big");
		z-index: 1;
	}
}

.timeline-step-addBetween {
	.hr {
		opacity: .5;
	}
}

.timeline-step-addBetween-action {
	@include buttonReset;

	padding-top: _theme("spacings.small");
	padding-bottom: _theme("spacings.small");
	position: relative;
	margin-left: (_theme("spacings.standard", true) + _theme("spacings.smallest", true)) * -1;
	padding-left: _theme("spacings.standard", true) + _theme("spacings.smallest", true);
	width: calc(100% + #{_theme("spacings.standard", true) + _theme("spacings.smallest", true)});
	outline: none;

	&:hover,
	&:focus {
		.hr {
			opacity: 1;
		}
	}

	&:not(:hover) {
		&:not(:focus) {
			.timeline-step-addBetween-action-icon {
				opacity: 0;
			}
		}
	}
}

.timeline-step-addBetween-action-icon {
	position: absolute;
	left: 0;
	top: _theme("spacings.smallest");
	z-index: 1;
	border-radius: 50%;
	background-color: currentColor;
	box-shadow: 0 0 0 _theme("spacings.smallest") _color("white");
	height: _theme("spacings.standard");
	width: _theme("spacings.standard");
	text-align: center;
	transition: opacity _theme("commons.animations.durations.fast");

	.lucca-icon {
		color: _color("white");
	}
}
