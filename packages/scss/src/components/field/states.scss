@use '../../../../icons/src/mixins' as icon;
@use '../../commons/utils/form';

@mixin hover {
	&::placeholder {
		color: _component('field.input.color', 'light'); // todo: replace with CSS var
	}
}

@mixin focus {
	&::placeholder {
		color: _component('field.input.color', 'lighter'); // todo: replace with CSS var
	}
}

@mixin required {
	.field-label,
	~ .field-label {
		&:not(:empty) {
			&::after {
				@include form.required;
			}
		}
	}
}

@mixin disabled {
	color: _color('text.light'); // todo: replace with CSS var
	cursor: not-allowed;
}

@mixin loading {
	// @include loading(1rem);

	&::before,
	&::after {
		content: '' !important;
		right: 0.5rem !important;
		bottom: 0.7rem !important;
		z-index: 2 !important;
		left: inherit !important;
		top: inherit !important;
		position: absolute !important;
	}

	.field-input {
		padding-right: 2rem;
	}
}

@mixin success {
	&::before {
		@include icon.makeIcon('tick_bold');

		// todo: isValid animation
		animation: isValid 3s forwards;
		border-radius: 50%;
		bottom: 0.85rem;
		color: var(--palettes-success-700);
		font-size: 1.2rem;
		height: 1rem;
		position: absolute;
		right: 0.4rem;
		z-index: 1;
	}

	.field-input {
		padding-right: 2rem;
	}
}

@mixin error {
	.field-label {
		color: var(--palettes-error-700);
	}

	.field-input {
		@include state('error', $label);
	}
}

@mixin state {
	&:not(:disabled, .is-disabled) {
		background-color: var(--palettes-#{$state}-50);

		.field-label,
		~ .field-suffix {
			color: var(--palettes-#{$state}-700);
		}

		&::placeholder {
			color: var(--palettes-#{$state}-400);
		}

		&:focus {
			&::placeholder {
				color: var(--palettes-#{$state}-300);
			}
		}

		&:focus,
		&.is-focused {
			~ .field-label {
				color: var(--palettes-#{$state}-700);
			}
		}

		&:focus {
			box-shadow: 0 0 0 4px var(--palettes-#{$state}-200), 0 0 0 1px var(--palettes-#{$state}-700) inset;
			background-color: var(--colors-white-color);
		}

		@if ($state == 'error') {
			box-shadow: 0 0 0 1px var(--palettes-#{$state}-700);
		}
	}
}
