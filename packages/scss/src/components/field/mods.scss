@use '../../commons/utils/form';

@mixin inline {
	margin-right: calc(var(--components-field-input-inline-margin) * 2);
	display: inline-flex;
}

@mixin block {
	width: 100%;
}

@mixin compact {
	align-items: center;
	flex-direction: row;
	margin-bottom: 1rem;
	width: calc(
		var(--components-field-sizes-default) + var(--components-field-compact-label-right-margin) +
			var(--components-field-compact-label-sizes-default)
	);

	.textfield-label,
	.radiosfield-label,
	.checkboxes-label {
		color: var(--components-field-compact-label-color);
		margin-right: var(--components-field-compact-label-right-margin);
		width: var(--components-field-compact-label-sizes-default);
		flex: 0 0 auto;
		margin-bottom: 0;
		order: -1;
	}

	.textfield-messages,
	.radiosfield-messages,
	.checkboxes-messages {
		max-width: var(--components-field-compact-label-sizes-default);
		align-items: center;
		display: inline-flex;
		position: absolute;
		bottom: 0;
		top: 0;
		left: 100%;
		width: 100%;
		line-height: 1.1;
		margin: 0 0 0 1rem;

		&.mod-helper {
			padding-left: calc(var(--components-field-compact-label-sizes-default) + var(--components-field-compact-label-right-margin));
			bottom: auto;
			max-width: 100%;
			top: 100%;
			left: 0;
			right: 0;
		}
	}
}

@mixin compactBlock {
	width: 100%;
}

@mixin framed {
	.textfield-messages,
	.radiosfield-messages,
	.checkboxes-messages {
		transition-duration: var(--commons-animations-durations-standard);
		transition-property: transform;
		position: absolute;
		text-align: center;
		bottom: 0;
		left: -1px;
		right: 0;
		transform: translateY(0);
		z-index: 4;

		> * {
			display: block;
		}
	}

	.textfield-messages-error,
	.radiosfield-messages-error,
	.checkboxes-messages-error {
		background-color: var(--palettes-error-700);
		color: var(--colors-white-color);
	}

	.textfield-messages-warning,
	.radiosfield-messages-warning,
	.checkboxes-messages-warning {
		background-color: var(--palettes-warning-700);
		color: var(--colors-white-color);
	}

	.textfield-messages-valid,
	.radiosfield-messages-valid,
	.checkboxes-messages-valid,
	.textfield-messages-success,
	.radiosfield-messages-success,
	.checkboxes-messages-success {
		background-color: var(--palettes-success-700);
		color: var(--colors-white-color);
	}

	.textfield-messages-helper,
	.radiosfield-messages-helper,
	.checkboxes-messages-helper {
		background-color: var(--palettes-grey-500);
		color: var(--colors-white-color);
	}

	.textfield-input,
	.radiosfield-input,
	.checkboxes-input {
		&:not(:disabled, .is-error, .is-success, .is-valid, .is-warning, .is-invalid) {
			background-color: var(--colors-white-color);

			&:focus,
			&:hover {
				position: relative;
				z-index: 1;
				background-color: var(--colors-white-color);
				box-shadow: form.fakeBorderOverlay(var(--components-field-framed-color));

				~ .textfield-messages,
				~ .radiosfield-messages,
				~ .checkboxes-messages {
					transform: translateY(100%);
				}
			}

			&:focus {
				z-index: 4;
				box-shadow: form.fakeBorderOverlay(var(--components-field-framed-color)), 0 0 0 4px var(--components-field-framed-color50);
			}
		}
	}

	.textfield-suffix,
	.radiosfield-suffix,
	.checkboxes-suffix {
		padding: var(--components-field-framed-side-padding);
		top: auto;
		z-index: 10;
		right: 0;
		bottom: 0;

		&.is-error {
			// @include fieldFramedState("error"); // todo:
			outline: 2px dashed greenyellow !important;
		}

		&.is-warning {
			// @include fieldFramedState("warning"); // todo:
			outline: 2px dashed greenyellow !important;
		}

		&.is-valid,
		&.is-success {
			// @include fieldFramedState("success"); // todo:
			outline: 2px dashed greenyellow !important;
		}

		// todo: d√©placer dans textfield
		~ .textfield-input {
			padding-right: var(--components-field-framed-suffix-padding-right);
		}
	}
}

@mixin framedLoading {
	&::before,
	&::after {
		right: var(--components-field-framed-side-padding) !important;
		top: var(--components-field-framed-side-padding) !important;
		bottom: auto !important;
	}
}
