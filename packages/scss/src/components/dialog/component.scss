@use '@lucca-front/scss/src/components/title/exports' as title;
@use '@lucca-front/scss/src/components/link/exports' as link;
@use '@lucca-front/scss/src/components/button/exports' as button;
@use '@lucca-front/scss/src/components/footer/exports' as footer;
@use '@lucca-front/scss/src/components/keyframe/exports' as keyframe;

@mixin component($atRoot: 'without: rule') {
	@include keyframe.scaleIn;

	animation-name: var(--components-dialog-animationOpening);
	animation-duration: var(--commons-animations-durations-standard);
	inset: var(--components-dialog-inset);
	width: var(--components-dialog-size);
	height: var(--components-dialog-height);
	max-width: var(--components-dialog-maxWidth);
	max-height: var(--components-dialog-maxHeight);
	background-color: var(--colors-white-color);
	border-radius: var(--components-dialog-borderRadius);
	box-shadow: var(--commons-boxShadow-M);
	position: fixed;
	margin: auto;
	overflow: scroll;
	display: flex;
	flex-direction: column;

	@at-root ($atRoot) {
		.dialog-header {
			padding: var(--spacings-S) var(--spacings-M);
			background-color: var(--colors-white-color);
			grid-template-areas: var(--components-dialog-headerAreas);
			grid-template-columns: var(--components-dialog-headerColumns);
			box-shadow: 0 1px 0 0 var(--palettes-grey-100);
			gap: var(--spacings-S);
			position: sticky;
			display: grid;
			top: 0;
		}

		.dialog-header-close {
			&.button {
				@include button.text;
				@include button.S;
				@include button.onlyIconS;

				align-self: start;
				justify-self: end;
				grid-area: close;
				display: var(--components-dialog-headerButtonDisplay);
			}

			&.link {
				@include link.decorationHover;

				justify-self: start;
				align-self: start;
				grid-area: close;
				line-height: var(--sizes-L-lineHeight);
				display: var(--components-dialog-headerLinkDisplay);
			}
		}

		.dialog-content {
			padding: var(--spacings-S) var(--spacings-M);
			flex-grow: 1;
		}

		.dialog-header-title {
			@include title.h2;

			padding: var(--components-dialog-headerTitlePadding);
			text-align: var(--components-dialog-headerTitleAlign);
			margin: 0;
			grid-area: title;
		}

		.dialog-footer {
			@include footer.sticky;
		}

		.backdrop-dialog {
			background-color: var(--palettes-grey-800);
			position: fixed;
			opacity: 0.45;
			inset: 0;
		}
	}
}
