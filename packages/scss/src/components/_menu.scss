.menu {
	align-items: center;
	background-color: _component('menu.background');
	display: flex;
	position: relative;
	gap: _theme('spacings.big');
	flex-wrap: wrap;

	&:not(.mod-noBorder)::after {
		content: '';
		position: absolute;
		bottom: 0;
		height: 1px;
		left: 0;
		right: 0;
		border-bottom: _theme('commons.divider.width') solid _theme('commons.divider.color');
	}

	.label {
		margin-right: 0;
		background-color: _color('grey', 100);
		color: _color('grey', 700);
	}
}

.menu-list {
	@include listReset;

	display: flex;
	gap: _theme('spacings.big');
	flex-wrap: wrap;
}

.menu-link {
	// legacy syntax
	margin-right: _theme('spacings.big'); // magic number
}

.menu-link, // legacy syntax
.menu-list-item-action {
	@include buttonReset;
	border-radius: _theme('commons.border.radius');
	color: _color('grey', 700);
	padding: _component('menu.padding');
	position: relative;
	text-decoration: none;
	transition: color _component('menu.animations.durations.fast') ease;
	text-align: center;
	display: block;

	&::after {
		background-color: _component('menu.default-palette.700');
		border-radius: _theme('commons.border.radius')
			_theme('commons.border.radius') 0 0;
		bottom: 0;
		content: '';
		display: block;
		height: 2px;
		left: 0;
		position: absolute;
		right: 0;
		transform: scale(0, 1);
		transition: transform _component('menu.animations.durations.fast') ease;
		z-index: 1;
	}

	&:not(.is-disabled) {
		&:focus-visible,
		&:hover {
			&:not(.is-active, [aria-current='page']) {
				color: _color("grey", "900");
			}

			.label {
				background-color: _component('menu.default-palette.100');
				color: _component('menu.default-palette.700');
			}

			&::after {
				transform: scale(0.75);
			}
		}
	}

	&:focus-visible {
		outline: none;
	}
}

// MODS
// ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒

.menu {
	&.mod-header {
		padding: 0 2.5rem;
	}

	&.mod-small {
		.menu-link,   // legacy syntax
		.menu-list-item-action {
			font-size: _theme('sizes.small.font-size');
			line-height: _theme('sizes.small.line-height');
			padding: .75rem 0;
		}

		.label {
			height: _theme("sizes.small.line-height");
			min-width: _theme("sizes.small.line-height");
			line-height: _theme("sizes.small.line-height");
			padding: 0;
		}

		.menu-link {
			// legacy syntax
			margin-right: _theme('spacings.standard'); // magic number
		}
	}
}

// STATES
// ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒

.menu-link,  // legacy syntax
.menu-list-item-action {
	&.is-active,  // legacy syntax
	&[aria-current="page"] {
		color: _component('menu.default-palette.700');

		.label {
			background-color: _component('menu.default-palette.100');
			color: _component('menu.default-palette.700');
		}

		&::after {
			background-color: _component('menu.default-palette.700');
			transform: scale(1);
		}
	}

	&.is-disabled {
		&,
		.label {
			color: _color('grey', 500);
			pointer-events: none;
		}
	}
}
