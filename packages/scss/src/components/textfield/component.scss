@use '@lucca-front/scss/src/components/formLabel/exports' as formLabel;
@use '@lucca-front/scss/src/commons/utils/a11y';

@mixin component($atRoot: 'without: rule') {
	display: grid;
	grid-gap: var(--spacings-XXS) 0;
	grid-template-columns: auto 1fr auto auto;
	font-size: var(--component-textField-label-fontSize);
	line-height: var(--component-textField-label-lineHeight);

	@at-root ($atRoot) {
		.textField-label {
		  display: contents;
		}

		.textField-label-prefix {
			display: flex;
			align-self: flex-start;
			color: var(--component-textField-input-prefix);
			cursor: text;
			line-height: var(--component-textField-input-lineHeight);
			grid-column: 1;
 			grid-row: 2;
		}

		.textField-label-suffix {
			display: flex;
			align-self: flex-start;
			color: var(--component-textField-input-prefix);
			cursor: text;
			line-height: var(--component-textField-input-lineHeight);
			grid-row: 2;
  		grid-column: 3;
		}

		.textField-label-prefix-item {
		  padding: var(--component-textField-input-paddingVertical) var(--spacings-XS);

		  &::selection {
		    background-color: var(--palettes-primary-200);
		  }

			&:last-child {
		    padding-right: 0;
		  }
		}

		.textField-label-suffix-item {
			padding: var(--component-textField-input-paddingVertical) var(--spacings-XS);

			&::selection {
				background-color: var(--palettes-primary-200);
			}

			&:first-child {
		    padding-left: 0;
		  }
		}

		.textField-label-input {
		  grid-column: 1 / span 4;
		  border: 1px solid var(--component-textField-input-border);
		  grid-row: 2;
		  pointer-events: none;
		  border-radius: calc(var(--commons-borderRadius-M) + 1px);
		  background-color: var(--component-textField-input-background);
		  transition-property: border-color;
		  transition-duration: var(--commons-animations-durations-fast);
		}

		.textField-action {
		  display: flex;
			padding-right: var(--spacings-XS);
			align-items: center;
		  grid-row: 2;
		  grid-column: 4;
		  color: var(--palettes-grey-600);
		}

		.textField-input {
		  grid-column: 2;
		  grid-row: 2;
		  border: 0;
		  outline: none;
		  padding: var(--component-textField-input-paddingVertical) var(--spacings-XS);
		  min-width: var(--spacings-M);
		  font: inherit;
		  color: var(--component-textField-input-color);
		  background-color: transparent;
		  z-index: 1;
		  line-height: var(--component-textField-input-lineHeight);

		  &::selection {
		    background-color: var(--palettes-primary-200);
		  }

		  &::placeholder {
		    color: var(--component-textField-input-placeholder);
		    opacity: 1;
		  }

		  &:hover {
		    ~ .textField-label {
					--component-textField-input-border: var(--palettes-grey-400);
		    }
		  }

		  &:focus-visible {
		    ~ .textField-label {
		      .textField-label-input {
		        @include a11y.focusVisible;
		      }
		    }
		  }
		}

		.formLabel {
			@include formLabel.label;
			grid-column-start: 1;
			grid-column-end: -1;
			grid-row: 1;
		}

		.inlineMessage {
			grid-column-start: 1;
			grid-column-end: -1;
		}
	}
}
