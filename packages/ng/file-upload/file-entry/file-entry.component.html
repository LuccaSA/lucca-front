<dl class="fileEntry" [class.mod-media]="media()" [ngClass]="dlClasses()">
	@if (!media()) {
	<dt class="fileEntry-filename">
		<div class="fileEntry-filename-tooltip" luTooltip luTooltipWhenEllipsis>{{ fileName() }}</div>
	</dt>
	@if (state() === 'error' && inlineMessageError()) {
	<dd class="fileEntry-inlineMessage">
		<lu-inline-message withTooltip [label]="inlineMessageError()" [state]="'error'" />
	</dd>
	} @else {
	<dd class="fileEntry-description">
		<span class="fileEntry-description-format" luTooltip luTooltipWhenEllipsis>{{ fileTypeDisplay()}}</span><span class="u-mask"> – </span>
		<lu-divider vertical />
		<span class="fileEntry-description-size">{{ fileSizeDisplay() }}</span>
	</dd>
	} }
	<dd class="fileEntry-status">
		@if (state() === 'error' && inlineMessageError()) {
		<div class="fileEntry-status-content" [luTooltip]="generateTooltip()">
			@if (media()) {
			<lu-inline-message class="fileEntry-status-content-inlineMessage" [label]="inlineMessageError()" [state]="'error'" />
			} @else {
			<lu-icon class="fileEntry-status-content-icon" icon="signError" />
			}
		</div>
		} @else {
		<div class="fileEntry-status-content" [luTooltip]="generateTooltip()">
			@if (previewUrl() && state() !== 'error') {
			<img class="fileEntry-status-content-img" [src]="previewUrl()" alt="" loading="lazy" />
			} @if (state() === 'loading') {
			<div class="fileEntry-status-content-loading loading"></div>
			} @if (!previewUrl() && state() !== 'loading') { }
		</div>
		}
	</dd>
	@if (downloadable() || deletable) {
	<dd class="fileEntry-toolbar">
		<div class="fileToolbar" [class.mod-disablePositioning]="!media()" [class.mod-S]="size() === 'S'">
			<ul class="fileToolbar-list">
				@if (downloadable()) {
				<li class="fileToolbar-list-item">
					<!-- TODO click -->
					<button class="fileToolbar-list-item-button" type="button" luButton luTooltip="Télécharger" luTooltipOnlyForDisplay>
						<lu-icon class="fileToolbar-list-item-button-icon" icon="arrowDownload" alt="Télécharger le fichier « {{fileName()}} »" />
					</button>
				</li>
				} @if (deletable) {
				<li class="fileToolbar-list-item">
					<button
						class="fileToolbar-list-item-button"
						type="button"
						luButton
						delete
						luTooltip="Supprimer"
						luTooltipOnlyForDisplay
						(click)="deleteFile$.next()"
					>
						<lu-icon class="fileToolbar-list-item-button-icon" icon="trashDelete" alt="Supprimer le fichier « {{fileName()}} »" />
					</button>
				</li>
				}
			</ul>
		</div>
	</dd>
	}
</dl>
@if (withPassword) {
<div class="box mod-withArrow mod-neutral pr-u-marginBlockStart150">
	<div class="box-arrow mod-neutral" style="inset-block-end: 100%"></div>
	<lu-form-field label="Mot de passe">
		<div class="u-displayFlex pr-u-gap100">
			<lu-text-input
				class="u-flexGrow1"
				required
				hasClearer
				searchIcon="searchMagnifyingGlass"
				type="password"
				[ngModel]="password()"
				(ngModelChange)="passwordChange$.next($event)"
			/>
			<button luButton type="button">Valider le mot de passe</button>
		</div>
	</lu-form-field>
</div>
}
