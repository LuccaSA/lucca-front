@if (layout() === "fieldset") {
	<fieldset class="form-fieldset" [class.mod-inline]="inline()" [class.mod-S]="size() === 'S'">
		<legend
			luFormLabel
			[tooltip]="tooltip()"
			[tag]="tag()"
			[required]="isInputRequired()"
			[class.pr-u-mask]="hiddenLabel()"
			[attr.aria-hidden]="hiddenLabel()"
		>
			<ng-container *luPortal="label()" />
		</legend>
		<ng-container *ngTemplateOutlet="projectionTpl" />
		@if (inlineMessage() || (invalidStatus() ? errorInlineMessage() : false)) {
			<lu-inline-message
				id="{{ id() }}-message"
				[label]="invalidStatus() && errorInlineMessage() ? errorInlineMessage() : inlineMessage()"
				[state]="invalidStatus() ? 'error' : inlineMessageState()"
			/>
		}
	</fieldset>
} @else {
	<label
		luFormLabel
		[counterStatus]="contentLength()"
		[counterMax]="counter()"
		[error]="invalidStatus()"
		[tag]="tag()"
		[tooltip]="tooltip()"
		[required]="isInputRequired()"
		[counterId]="`${id()}-counter`"
		[attr.id]="`${id()}-label`"
		[attr.for]="id()"
		[attr.role]="rolePresentationLabel() ? 'presentation' : null"
		[class.pr-u-mask]="hiddenLabel()"
		[class.inputFramed-header-label]="framed"
		[counterVisibleOnlyJustBeforeError]="counterVisibleOnlyJustBeforeError()"
	>
		<span><ng-container *luPortal="label()" /></span>
	</label>
	@if (AI()) {
		<div class="form-field-contentOptional">
			<ng-container *ngTemplateOutlet="projectionTpl" />
			<lu-icon
				class="pr-u-focusVisible pr-u-borderRadiusSmall"
				[luTooltip]="iconAItooltip()"
				size="S"
				AI
				icon="weatherStars"
				[alt]="iconAIalt()"
			/>
		</div>
	} @else {
		<ng-container *ngTemplateOutlet="projectionTpl" />
	}
	@if (inlineMessage() || (invalidStatus() ? errorInlineMessage() : false)) {
		<lu-inline-message
			id="{{ id() }}-message"
			[label]="invalidStatus() && errorInlineMessage() ? errorInlineMessage() : inlineMessage()"
			[state]="invalidStatus() ? 'error' : inlineMessageState()"
		/>
	}
}

<ng-template #projectionTpl>
	<ng-content />
</ng-template>
