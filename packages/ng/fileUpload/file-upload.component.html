<input
	[attr.aria-describedby]="'fileUpload-instruction-' + idSuffix"
	[attr.multiple]="multiple ? 'multiple' : null"
	class="fileUpload-input"
	type="file"
	title=""
	[attr.accept]="acceptAttribute().length > 0 ? acceptAttribute() : null"
	luInput
	(dragenter)="droppable = true"
	(dragleave)="droppable = false"
	(change)="filesChange($event)"
/>
@switch (state) { @case ('loading') {
<div class="fileUpload-status">
	@if (bitmap() && bitmapPreviews.length > 0) {
	<img class="fileUpload-status-image" [src]="bitmapPreviews[0]" [alt]="files[0].name" />
	}
	<div class="fileUpload-status-loading loading"></div>
</div>
} @default {
<div
	class="fileUpload-status"
	[innerHtml]="'https://cdn.lucca.fr/transverse/prisme/visuals/empty-states/icons/iconPaperAction.svg' | luSafeExternalSvg"
></div>
}}

<div class="fileUpload-instruction" [attr.id]="'fileUpload-instruction-' + idSuffix">
	@if (( state === 'critical') && (!multiple)) {
	<span class="fileUpload-instruction-filename" aria-hidden="true">filename.ext</span>
	} @if ((state !== 'critical') || ((state === 'critical') && small && multiple)) {
	<span class="fileUpload-instruction-action" aria-hidden="true">
		@if (multiple) { Déposez les fichiers ici ou
		<span class="fileUpload-instruction-action-click">cliquez pour les sélectionner</span>. } @else { Déposez le fichier ici ou
		<span class="fileUpload-instruction-action-click">cliquez pour le sélectionner</span>. }
	</span>
	} @if (state === 'critical') { @if (!small) {
	<span class="fileUpload-instruction-action" aria-hidden="true">
		@if (multiple) { Cliquez ou déposez des nouveaux fichiers. } @else { Remplacez-le en cliquant ou en déposant un nouveau fichier. }</span
	>
	} } @if (accept().length > 0) {
	<span class="fileUpload-instruction-formats">Format accepté : {{acceptNames()}}. </span>
	} @if (maxWeight()) {
	<span class="fileUpload-instruction-size">Poids maximum : {{ maxWeightDisplay() }}. </span>
	}
</div>

<span class="fileUpload-button button" aria-hidden="true">@if (multiple) {Sélectionner des fichiers} @else {Sélectionner un fichier}</span>
