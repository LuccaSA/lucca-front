<div class="lu-picker-panel lu-option-picker-panel mod-multiple" role="dialog" *ngIf="{ options: (options$ | async) || [] } as ctx">
	<div
		class="lu-picker-content"
		[class.is-loading]="loading$ | async"
		[class.is-filled]="ctx.options.length > 0"
		tabindex="0"
		role="listbox"
		aria-multiselectable="true"
		(scroll)="onScroll($event)"
	>
		<div class="lu-picker-content-option">
			<ng-container *ngIf="grouping">
				<div
					*ngFor="let group of groups$ | async"
					class="lu-picker-content-group"
					role="group"
					[attr.aria-labelledby]="selectId + '-group-' + group.key"
				>
					<button
						class="lu-picker-content-option-group-title button mod-text"
						role="presentation"
						[id]="selectId + '-group-' + group.key"
						(click)="toggleOptions(group.options)"
					>
						<ng-container *luPortal="grouping.content; context: { $implicit: group }" />
					</button>
					<ng-template [ngTemplateOutlet]="optionsList" [ngTemplateOutletContext]="{ $implicit: group.options }" />
				</div>
			</ng-container>
			<ng-container *ngIf="!grouping">
				<ng-template [ngTemplateOutlet]="optionsList" [ngTemplateOutletContext]="{ $implicit: ctx.options }" />
			</ng-container>

			<ng-template #optionsList let-options>
				<lu-select-option
					*ngFor="let option of options; let index = index"
					[option]="option"
					[optionTpl]="optionTpl"
					[optionIndex]="index"
					[scrollIntoViewOptions]="{ block: 'nearest' }"
					[isSelected]="option | luIsOptionSelected:optionComparer:selectedOptions"
					(click)="toggleOption(option)"
				/>
			</ng-template>
			<div class="lu-picker-content-option-emptyState" *ngIf="ctx.options.length === 0 && (loading$ | async) === false">
				{{intl.emptyResults}}
			</div>
		</div>
		<div *ngIf="loading$ | async" class="lu-picker-content-loading">
			<div class="loading"></div>
			<span>{{intl.loading}}</span>
		</div>
	</div>
	<!--<div class="lu-picker-content-add">
		<button class="button mod-text mod-icon palette-product" type="button">
			<span aria-hidden="true" class="lucca-icon icon-mathsPlus"></span>Add a new supplier
		</button>
	</div>-->
</div>
