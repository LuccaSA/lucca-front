<lu-scroll-box class="filterPillBar-scrollBox">
	<div class="filterPillBar-scrollBox-first"></div>

	<div class="filterPillBar-scrollBox-group">
		@if (addonBefore()) {
		<ng-container *luPortal="addonBefore()"></ng-container>

		<lu-divider class="filterPillBar-divider" />
		} @if (toggleButton) {
		<button
			class="filterPill"
			type="button"
			luTooltip="Filtres supplémentaires"
			luTooltipOnlyForDisplay
			[luPopover2]="contentOptionsTpl"
			[customPositions]="popoverPositions"
		>
			<lu-icon class="filterPill-icon" icon="filtersDescending" alt="Filtres supplémentaires"></lu-icon>
		</button>
		}

		<ng-content></ng-content>
	</div>

	@if (addonAfter()) {
	<div class="filterPillBar-scrollBox-export">
		<ng-container *luPortal="addonAfter()"></ng-container>
	</div>
	}

	<div class="filterPillBar-scrollBox-last"></div>
</lu-scroll-box>

<ng-template #contentOptionsTpl>
	<div class="filterPill_popover-content popover-contentOptional">
		@for (pill of pills(); track pill.name(); let index = $index) {

		<div class="form-field mod-selectOption filterPill_popover-content-formField">
			<label class="formLabel" [attr.for]="'filterPillOptions' + index">{{ pill.label() }}</label>
			<span class="checkboxField">
				<input
					type="checkbox"
					class="checkboxField-input"
					[attr.id]="'filterPillOptions' + index"
					[ngModel]="pillsState()[pill.name()]"
					(ngModelChange)="togglePill(pill.name())"
				/>
				<span class="checkboxField-icon" aria-hidden="true"><span class="checkboxField-icon-check"></span></span>
			</span>
		</div>
		}
	</div>
</ng-template>
